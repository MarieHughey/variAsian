<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Julius+Sans+One">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>VariAsian: Member Services</title>
  </head>

  <body>
    <div class="container">
        <img src="../images/bts.jpeg" id="memberPic" alt="" style="width:100%;">
        <div class="header" id ="aboutHeader" style="font-family: 'Julius Sans One', serif; font-size: 60px;">
          <h2>Song Suggestions</h2>
        </div>

        <div class="button-block">
            <button class="submit" id="log-out" style="font-family: 'Julius Sans One', serif; top: 50px; right: 50px; z-index:5;" >Log Out</button>
        </div>

        <div class="container" style="margin-top: 40px;">
            <ul class="collapsible z-depth-0 song_suggestions" style="border-bottom-color: orchid">


            </ul>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-firestore.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyCsV0oOkeADiAgYiLriwK-s5PCuyg62ejk",
        authDomain: "variasian-connected.firebaseapp.com",
        databaseURL: "https://variasian-connected.firebaseio.com",
        projectId: "variasian-connected",
        storageBucket: "variasian-connected.appspot.com",
        messagingSenderId: "317829998576"
      };
      firebase.initializeApp(config);

      const auth = firebase.auth();
      const db = firebase.firestore();

    </script> 

    <script>

    db.collection('song_suggestions').get().then(snapshot => {
        setupSongs(snapshot.docs);
        console.log(snapshot.docs);
    });

    const songList = document.querySelector('.song_suggestions');

    const setupSongs = (data) => {
        let html ='';
        data.forEach(doc => {
            const song = doc.data();
            console.log(song);
            const li = `
                <li>
                    <div class="collapsible-header grey lighten-4">${song.title}</div>
                    <div class="collapsible-body white">${song.artist}</div>
                    <div class="collapsible-body white">${song.votes}</div>
                </li>
            `;
            html += li;
        })

        songList.innerHTML = html;
    }

    </script>
  </body>
</html>
